<!DOCTYPE html><html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toko Digital — Top Up Instan (QRIS & eWallet) + Struk</title>
  <style>
    :root{
      --primary:#1e3a8a; /* biru */
      --accent:#f97316;  /* oranye */
      --bg:#f8fafc;      /* slate-50 */
      --card:#ffffff;
      --muted:#64748b;
      --success:#16a34a;
      --warning:#eab308;
      --danger:#dc2626;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); color:#0f172a}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800;color:var(--primary)}
    .brand .dot{width:10px;height:10px;border-radius:999px;background:var(--accent)}
    .btn{appearance:none;border:none;border-radius:999px;padding:12px 18px;background:var(--accent);color:#fff;font-weight:700;cursor:pointer}
    .btn.secondary{background:var(--primary)}
    .btn.ghost{background:transparent;border:1px solid #cbd5e1;color:var(--primary)}
    .btn.small{padding:8px 12px;font-weight:600}
    .btn.block{width:100%}
    .grid{display:grid;gap:16px}
    .hero{display:grid;grid-template-columns:1.2fr 1fr;gap:24px;align-items:center}
    .card{background:var(--card);border:1px solid #e2e8f0;border-radius:var(--radius);padding:20px;box-shadow:0 6px 20px rgba(15,23,42,.04)}
    .badges{display:flex;gap:8px;flex-wrap:wrap}
    .badge{border-radius:999px;border:1px solid #cbd5e1;padding:6px 10px;font-size:12px;color:var(--muted)}
    .section-title{font-size:22px;margin:4px 0 14px}
    .muted{color:var(--muted)}
    .products{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
    .product{display:grid;gap:10px}
    .product h4{margin:0}
    .price{font-weight:800;font-size:18px}
    .pay-logos{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .pay-logos .pill{border:1px dashed #cbd5e1;border-radius:999px;padding:6px 10px;font-size:12px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .input{display:grid;gap:6px}
    input, select, textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #cbd5e1;background:#fff}
    textarea{min-height:90px}
    .status{display:inline-flex;align-items:center;gap:8px;border-radius:999px;padding:6px 10px;font-size:12px}
    .status.pending{background:#fef9c3;color:#854d0e;border:1px solid #fde047}
    .status.done{background:#dcfce7;color:#14532d;border:1px solid #86efac}
    .status.failed{background:#fee2e2;color:#7f1d1d;border:1px solid #fecaca}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:10px;border-bottom:1px solid #e2e8f0;text-align:left}
    .flex{display:flex;gap:10px;align-items:center}
    .right{justify-content:flex-end}
    .hidden{display:none}
    .footer{padding:40px 0;color:var(--muted);font-size:14px}
    .qrbox{display:grid;place-items:center;border:2px dashed #cbd5e1;border-radius:12px;padding:16px}
    .note{font-size:12px;color:var(--muted)}
    @media (max-width:860px){.hero{grid-template-columns:1fr} .row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <header class="nav">
      <div class="brand"><div class="dot"></div> Toko Digital</div>
      <div class="badges">
        <div class="badge">QRIS</div>
        <div class="badge">Dana</div>
        <div class="badge">OVO</div>
        <div class="badge">GoPay</div>
        <div class="badge">ShopeePay</div>
        <div class="badge">LinkAja</div>
      </div>
    </header>

    <section class="hero">
      <div class="card">
        <h1 style="margin:0 0 8px;font-size:34px">Top Up Digital & Streaming Instan 🚀</h1>
        <p class="muted" style="margin:0 0 16px">Pulsa, paket data, top up game, dan langganan Netflix/Spotify aktif cepat. Bayar mudah via <b>QRIS</b> atau <b>e-wallet</b>.</p>
        <div class="badges" style="margin:10px 0 18px">
          <div class="badge">Instan</div>
          <div class="badge">Harga Terjangkau</div>
          <div class="badge">Aman Terpercaya</div>
        </div>
        <button class="btn" onclick="document.getElementById('orderCard').scrollIntoView({behavior:'smooth'})">Pesan Sekarang</button>
      </div>
      <div class="card">
        <h3 style="margin:0 0 12px">Metode Pembayaran</h3>
        <div class="pay-logos">
          <span class="pill">QRIS</span>
          <span class="pill">Dana</span>
          <span class="pill">OVO</span>
          <span class="pill">GoPay</span>
          <span class="pill">ShopeePay</span>
          <span class="pill">LinkAja</span>
        </div>
        <div style="height:12px"></div>
        <div class="qrbox">
          <!-- Ganti gambar ini dengan QRIS milikmu (base64 atau URL file lokal) -->
          <svg width="140" height="140" viewBox="0 0 120 120" role="img" aria-label="Placeholder QR">
            <rect x="0" y="0" width="120" height="120" fill="#f1f5f9" stroke="#94a3b8"/>
            <rect x="10" y="10" width="30" height="30" fill="#0f172a"/>
            <rect x="80" y="10" width="30" height="30" fill="#0f172a"/>
            <rect x="10" y="80" width="30" height="30" fill="#0f172a"/>
            <rect x="48" y="48" width="24" height="24" fill="#0f172a"/>
          </svg>
          <p class="note">Ganti placeholder ini dengan gambar QRIS kamu.</p>
        </div>
      </div>
    </section>

    <section class="card" style="margin-top:18px">
      <h2 class="section-title">Produk Terpopuler</h2>
      <div class="grid products">
        <div class="card product">
          <h4>Pulsa Telkomsel 50K</h4>
          <div class="muted">Pulsa reguler</div>
          <div class="price">Rp 50.000</div>
          <button class="btn small" onclick="prefillProduct('Pulsa Telkomsel 50K',50000)">Beli via QRIS/eWallet</button>
        </div>
        <div class="card product">
          <h4>Data 10GB (30 Hari)</h4>
          <div class="muted">Semua jaringan</div>
          <div class="price">Rp 45.000</div>
          <button class="btn small" onclick="prefillProduct('Data 10GB (30 Hari)',45000)">Beli via QRIS/eWallet</button>
        </div>
        <div class="card product">
          <h4>Top Up ML 344 Diamonds</h4>
          <div class="muted">Via ID & Server</div>
          <div class="price">Rp 90.000</div>
          <button class="btn small" onclick="prefillProduct('Top Up ML 344 Diamonds',90000)">Beli via QRIS/eWallet</button>
        </div>
        <div class="card product">
          <h4>Netflix Premium 1 Bulan</h4>
          <div class="muted">Akun Sharing/Pribadi</div>
          <div class="price">Rp 55.000</div>
          <button class="btn small" onclick="prefillProduct('Netflix Premium 1 Bulan',55000)">Beli via QRIS/eWallet</button>
        </div>
      </div>
    </section>

    <section id="orderCard" class="card" style="margin-top:18px">
      <h2 class="section-title">Formulir Pemesanan</h2>
      <div class="grid row">
        <div class="input">
          <label>Nama Lengkap</label>
          <input id="custName" placeholder="Nama Anda" />
        </div>
        <div class="input">
          <label>Kontak (WhatsApp / Email)</label>
          <input id="custContact" placeholder="contoh: 0812xxxx / email@contoh.com" />
        </div>
      </div>
      <div class="grid row">
        <div class="input">
          <label>Produk</label>
          <input id="productName" placeholder="Pilih dari daftar atau ketik manual" />
        </div>
        <div class="input">
          <label>Harga (Rp)</label>
          <input id="productPrice" type="number" placeholder="0" />
        </div>
      </div>
      <div class="grid row">
        <div class="input">
          <label>Metode Pembayaran</label>
          <select id="payMethod">
            <option value="QRIS">QRIS</option>
            <option value="Dana">Dana</option>
            <option value="OVO">OVO</option>
            <option value="GoPay">GoPay</option>
            <option value="ShopeePay">ShopeePay</option>
            <option value="LinkAja">LinkAja</option>
          </select>
        </div>
        <div class="input">
          <label>Catatan Tambahan</label>
          <input id="note" placeholder="ID game, nomor tujuan, dsb." />
        </div>
      </div>
      <div class="grid">
        <div class="card" style="background:#f8fafc;border-style:dashed">
          <b>Instruksi Pembayaran:</b>
          <ol class="muted">
            <li>Jika memilih <b>QRIS</b>, scan kode QR di bagian atas.</li>
            <li>Jika memilih e-wallet, kirim ke akun yang tertera berikut (ganti sesuai akunmu):<br/>Dana/OVO/GoPay/ShopeePay: <b>08xx-xxxx-xxxx a.n. Nama Kamu</b></li>
            <li>Setelah membayar, tekan tombol <b>Buat Pesanan & Struk</b>. Owner akan memproses dan mengubah status menjadi <b>Selesai</b>.</li>
          </ol>
          <span class="note">Catatan: ini contoh statis. Ganti nomor e-wallet & gambar QRIS dengan milikmu.</span>
        </div>
      </div>
      <div class="flex right" style="margin-top:10px">
        <button class="btn" onclick="createOrder()">Buat Pesanan & Struk</button>
      </div>
    </section>

    <section class="card" style="margin-top:18px">
      <h2 class="section-title">Cek Status Pesanan</h2>
      <div class="grid row">
        <div class="input">
          <label>Nomor Pesanan</label>
          <input id="lookupOrderId" placeholder="contoh: ORD-20250101-123" />
        </div>
        <div class="input">
          <label>Kontak (WA/Email)</label>
          <input id="lookupContact" placeholder="Masukkan kontak yang digunakan saat pesan" />
        </div>
      </div>
      <div class="flex right" style="margin:10px 0 14px">
        <button class="btn secondary" onclick="lookupOrder()">Lihat Struk</button>
      </div>
      <div id="receipt" class="card hidden"></div>
    </section>

    <section class="card" style="margin-top:18px">
      <div class="flex" style="justify-content:space-between;align-items:center">
        <h2 class="section-title">Panel Owner (Admin)</h2>
        <div class="flex">
          <input id="adminPass" type="password" placeholder="Password admin" style="padding:10px;border-radius:12px;border:1px solid #cbd5e1" />
          <button class="btn small" onclick="adminLogin()">Login</button>
        </div>
      </div>
      <div id="adminArea" class="hidden">
        <div class="flex right" style="margin:6px 0 12px">
          <button class="btn ghost small" onclick="exportCSV()">Export CSV</button>
          <button class="btn ghost small" onclick="clearAll()">Hapus Semua (Local)</button>
        </div>
        <table class="table" id="ordersTable">
          <thead>
            <tr><th>Order ID</th><th>Nama</th><th>Kontak</th><th>Produk</th><th>Harga</th><th>Metode</th><th>Status</th><th>Aksi</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <div id="editor" class="card hidden" style="margin-top:14px">
          <h3 style="margin-top:0">Edit Pesanan</h3>
          <div class="grid row">
            <div class="input">
              <label>Status</label>
              <select id="editStatus">
                <option value="Pending">Pending</option>
                <option value="Selesai">Selesai</option>
                <option value="Gagal">Gagal</option>
              </select>
            </div>
            <div class="input">
              <label>Nomor Resi / SN (opsional)</label>
              <input id="editSN" placeholder="SN / No. Resi / Kode" />
            </div>
          </div>
          <div class="input">
            <label>Hasil Pesanan (disimpan di struk)</label>
            <textarea id="editResult" placeholder="Contoh: Email: xxx@xxx.com | Password: ******, atau Kode Voucher: ABCD-1234"></textarea>
          </div>
          <div class="flex right">
            <button class="btn small" onclick="saveEdit()">Simpan Perubahan</button>
          </div>
        </div>
      </div>
      <p class="note" style="margin-top:10px">Keamanan dasar: panel ini memakai password hard-coded untuk demo. Ganti pada variabel <code>ADMIN_PASSWORD</code> di skrip.</p>
    </section>

    <footer class="footer">
      <div class="flex" style="justify-content:space-between;flex-wrap:wrap;gap:8px">
        <span>©️ <span id="year"></span> Toko Digital. All rights reserved.</span>
        <span>Powered by <b>Benitha</b> • WhatsApp: 08xx-xxxx-xxxx • IG: @b.nithaaa</span>
      </div>
    </footer>
  </div>

  <script>
  // ====== Data Store (LocalStorage) ======
  const STORE_KEY = 'orders.v1';
  const ADMIN_PASSWORD = 'owner123'; // Ganti ini!
  let orders = loadOrders();
  let selectedOrderId = null;

  function loadOrders(){
    try{ return JSON.parse(localStorage.getItem(STORE_KEY)) || []; }catch(e){ return []; }
  }
  function saveOrders(){ localStorage.setItem(STORE_KEY, JSON.stringify(orders)); renderOrders(); }

  function genId(){
    const d = new Date();
    const pad = (n)=> String(n).padStart(2,'0');
    const id = `ORD-${d.getFullYear()}${pad(d.getMonth()+1)}${pad(d.getDate())}-${pad(d.getHours())}${pad(d.getMinutes())}${pad(d.getSeconds())}-${Math.floor(Math.random()*900+100)}`;
    return id;
  }

  function prefillProduct(name, price){
    document.getElementById('productName').value = name;
    document.getElementById('productPrice').value = price;
    document.getElementById('orderCard').scrollIntoView({behavior:'smooth'});
  }

  function createOrder(){
    const name = document.getElementById('custName').value.trim();
    const contact = document.getElementById('custContact').value.trim();
    const product = document.getElementById('productName').value.trim();
    const price = parseInt(document.getElementById('productPrice').value || '0',10);
    const method = document.getElementById('payMethod').value;
    const note = document.getElementById('note').value.trim();

    if(!name || !contact || !product || !price){
      alert('Lengkapi nama, kontak, produk, dan harga.');
      return;
    }

    const id = genId();
    const order = { id, name, contact, product, price, method, note, status:'Pending', createdAt: new Date().toISOString(), result:'', sn:'' };
    orders.unshift(order);
    saveOrders();
    window.scrollTo({top:0,behavior:'smooth'});
    renderReceipt(order);
  }

  function lookupOrder(){
    const id = document.getElementById('lookupOrderId').value.trim();
    const contact = document.getElementById('lookupContact').value.trim().toLowerCase();
    if(!id || !contact){ alert('Masukkan Nomor Pesanan dan Kontak.'); return; }
    const order = orders.find(o => o.id === id && o.contact.toLowerCase() === contact);
    if(!order){ alert('Pesanan tidak ditemukan. Pastikan Nomor Pesanan & Kontak benar.'); return; }
    renderReceipt(order);
  }

  function renderReceipt(order){
    const el = document.getElementById('receipt');
    const statusClass = order.status==='Selesai' ? 'done' : (order.status==='Gagal'?'failed':'pending');
    const resultBlock = order.status==='Selesai'
      ? `<tr><td><b>Hasil Pesanan</b></td><td><pre style="white-space:pre-wrap;margin:0">${escapeHtml(order.result||'-')}</pre></td></tr>`
      : `<tr><td><b>Hasil Pesanan</b></td><td class="muted">(Akan muncul setelah owner menyelesaikan pesanan)</td></tr>`;

    el.classList.remove('hidden');
    el.innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h3 style="margin:0">Struk Pembelian</h3>
        <span class="status ${statusClass}">Status: ${order.status}</span>
      </div>
      <table class="table" style="margin-top:8px">
        <tr><td><b>Nomor Pesanan</b></td><td>${order.id}</td></tr>
        <tr><td><b>Tanggal</b></td><td>${fmtDate(order.createdAt)}</td></tr>
        <tr><td><b>Nama</b></td><td>${escapeHtml(order.name)}</td></tr>
        <tr><td><b>Kontak</b></td><td>${escapeHtml(order.contact)}</td></tr>
        <tr><td><b>Produk</b></td><td>${escapeHtml(order.product)}</td></tr>
        <tr><td><b>Harga</b></td><td>Rp ${order.price.toLocaleString('id-ID')}</td></tr>
        <tr><td><b>Metode</b></td><td>${escapeHtml(order.method)}</td></tr>
        <tr><td><b>Catatan</b></td><td>${escapeHtml(order.note||'-')}</td></tr>
        <tr><td><b>SN/Resi</b></td><td>${escapeHtml(order.sn||'-')}</td></tr>
        ${resultBlock}
      </table>
      <div class="note">Simpan Nomor Pesanan untuk cek status. Jika ada kendala, hubungi admin melalui WhatsApp.</div>
    `;
  }

  function fmtDate(iso){ const d = new Date(iso); return d.toLocaleString('id-ID', { dateStyle:'medium', timeStyle:'short' }); }

  function adminLogin(){
    const pass = document.getElementById('adminPass').value;
    if(pass !== ADMIN_PASSWORD){ alert('Password salah.'); return; }
    document.getElementById('adminArea').classList.remove('hidden');
    renderOrders();
  }

  function renderOrders(){
    const tbody = document.querySelector('#ordersTable tbody');
    tbody.innerHTML = orders.map(o => `
      <tr>
        <td>${o.id}</td>
        <td>${escapeHtml(o.name)}</td>
        <td>${escapeHtml(o.contact)}</td>
        <td>${escapeHtml(o.product)}</td>
        <td>Rp ${o.price.toLocaleString('id-ID')}</td>
        <td>${escapeHtml(o.method)}</td>
        <td>${o.status}</td>
        <td><button class="btn small" onclick="openEditor('${o.id}')">Edit</button></td>
      </tr>
    `).join('');
  }

  function openEditor(id){
    const o = orders.find(x=>x.id===id);
    if(!o) return;
    selectedOrderId = id;
    document.getElementById('editor').classList.remove('hidden');
    document.getElementById('editStatus').value = o.status;
    document.getElementById('editResult').value = o.result||'';
    document.getElementById('editSN').value = o.sn||'';
    document.getElementById('editor').scrollIntoView({behavior:'smooth'});
  }

  function saveEdit(){
    if(!selectedOrderId) return;
    const idx = orders.findIndex(x=>x.id===selectedOrderId);
    if(idx<0) return;
    orders[idx].status = document.getElementById('editStatus').value;
    orders[idx].result = document.getElementById('editResult').value.trim();
    orders[idx].sn = document.getElementById('editSN').value.trim();
    saveOrders();
    alert('Perubahan tersimpan.');
  }

  function exportCSV(){
    const header = ['id','createdAt','name','contact','product','price','method','note','status','sn','result'];
    const rows = orders.map(o=> header.map(h=> JSON.stringify(String((o[h]??'')).replaceAll('\n',' '))).join(','));
    const csv = header.join(',') + '\n' + rows.join('\n');
    const blob = new Blob([csv], {type:'text/csv'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'orders.csv'; a.click();
    URL.revokeObjectURL(url);
  }

  function clearAll(){
    if(!confirm('Hapus semua data pesanan di perangkat ini?')) return;
    orders = []; saveOrders();
    document.getElementById('receipt').classList.add('hidden');
  }

  function escapeHtml(s){
    return String(s)
      .replaceAll(/&/g,'&amp;')
      .replaceAll(/</g,'&lt;')
      .replaceAll(/>/g,'&gt;')
      .replaceAll(/"/g,'&quot;')
      .replaceAll(/'/g,'&#39;');
  }

  document.getElementById('year').textContent = new Date().getFullYear();
  renderOrders();
  </script>
</body>
</html>
